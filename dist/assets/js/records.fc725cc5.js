(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["records"],{"1da1":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("d3b7"),r("e6cf");function o(t,e,r,o,a,s,n){try{var i=t[s](n),c=i.value}catch(l){return void r(l)}i.done?e(c):Promise.resolve(c).then(o,a)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var n=t.apply(e,r);function i(t){o(n,a,s,i,c,"next",t)}function c(t){o(n,a,s,i,c,"throw",t)}i(void 0)}))}}},"3ca3":function(t,e,r){"use strict";var o=r("6547").charAt,a=r("69f3"),s=r("7dd0"),n="String Iterator",i=a.set,c=a.getterFor(n);s(String,"String",(function(t){i(this,{type:n,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,a=e.index;return a>=r.length?{value:void 0,done:!0}:(t=o(r,a),e.index+=t.length,{value:t,done:!1})}))},"67d2":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",[r("b-colxx",{attrs:{xxs:"12"}},[r("h5",{staticClass:"mb-4 card-title"},[t._v(t._s(t.$t("menu.records")))]),t._v(" "),r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"12",lg:"12"}},[r("b-card",{staticClass:"mb-4",attrs:{"no-body":""}},[r("b-tabs",{attrs:{card:"","no-fade":""}},[r("b-tab",{attrs:{title:"Tax Records",active:"","title-item-class":"w-25 text-center"}},[r("tax"),t._v(" "),r("b-table",{attrs:{items:t.tax_records}})],1),t._v(" "),r("b-tab",{attrs:{title:"Mechanic Workshop Records","title-item-class":"w-25 text-center"}},[r("mechanic"),t._v(" "),r("b-table",{attrs:{items:t.mechanic_workshop_records}})],1),t._v(" "),r("b-tab",{attrs:{title:"Customer Records","title-item-class":"w-25 text-center"}},[r("customer"),t._v(" "),r("b-table",{attrs:{items:t.customer_records}})],1),t._v(" "),r("b-tab",{attrs:{title:"Toll Records","title-item-class":"w-25 text-center"}},[r("toll"),t._v(" "),r("b-table",{attrs:{items:t.toll_records}})],1)],1)],1)],1)],1)],1)],1)],1)},a=[],s=r("cee4"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",[r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("v-select",{attrs:{label:"name",reduce:function(t){return t.id},options:t.tax_type_options},model:{value:t.form.tax_type_id,callback:function(e){t.$set(t.form,"tax_type_id",e)},expression:"form.tax_type_id"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.tax_type")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.amount")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date","string"===typeof e?e.trim():e)},expression:"form.date"}}),t._v(" "),r("datepicker",{attrs:{"bootstrap-styling":!0,format:"dd-MM-yyyy"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.date")))]),t._v(" "),r("b-form-invalid-feedback",[t._v("Purchase date is required!")])],1)])],1),t._v(" "),r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.filer_name,callback:function(e){t.$set(t.form,"filer_name",e)},expression:"form.filer_name"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.filer_name")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.filer_contact,callback:function(e){t.$set(t.form,"filer_contact",e)},expression:"form.filer_contact"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.filer_contact")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.accountant_fee,callback:function(e){t.$set(t.form,"accountant_fee",e)},expression:"form.accountant_fee"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.accountant_fee")))])],1)])],1),t._v(" "),r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"4",lg:"4"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-textarea",{model:{value:t.form.comments,callback:function(e){t.$set(t.form,"comments",e)},expression:"form.comments"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.tax.comments")))])],1)])],1),t._v(" "),t.editing_mode?r("div",[r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"secondary"},on:{click:function(e){return e.stopPropagation(),t.update_tax_record(t.form.id)}}},[t._v(t._s(" Update"))]),t._v(" "),r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"info"},on:{click:function(e){return e.stopPropagation(),t.cancel_update_tax_record()}}},[r("i",{staticClass:"simple-icon-close"})])],1):r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.save_tax_record(e)}}},[t._v(t._s("Save"))]),t._v(" "),t.isProcessing?r("div",[r("b-spinner",{staticClass:"mb-1",attrs:{variant:"primary",label:"Spinning"}}),t._v(" "),r("p",{staticClass:"text-primary"},[t._v(t._s(t.processing_text))])],1):t._e()],1),t._v(" "),r("b-table",{attrs:{id:"tax_table",items:t.tax_records,fields:t.tax_fields,"current-page":"currentPage","per-page":t.perPage},scopedSlots:t._u([{key:"cell(added)",fn:function(e){return[r("ul",{staticClass:"menu"},[r("li",{staticClass:"menu-item"},[t._v("Added: "+t._s(e.item.added))]),t._v(" "),r("li",{staticClass:"menu-item"},[t._v("Updated: "+t._s(e.item.updated))])])]}},{key:"cell(actions)",fn:function(e){return[r("b-button",{attrs:{variant:"grey",size:"xs"},on:{click:function(r){return r.stopPropagation(),t.edit_tax_record(e.item)}}},[r("i",{staticClass:"simple-icon-pencil"})]),t._v(" "),1==t.user.role_id?r("b-button",{attrs:{variant:"grey",size:"xs"},on:{click:function(r){return r.stopPropagation(),t.delete_tax_record(e.item)}}},[r("i",{staticClass:"simple-icon-trash"})]):t._e()]}}])}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Current Page: "+t._s(t.currentPage))]),t._v(" "),r("b-pagination",{attrs:{align:"center",size:"md","total-rows":t.rows,"per-page":t.perPage,"aria-controls":"tax-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},i=[],c=r("5530"),l=r("4a7a"),m=r.n(l),u=(r("6dfc"),r("fa33")),_=r("2b47"),d=r("2f62"),p={components:{"v-select":m.a,Datepicker:u["a"]},data:function(){return{isProcessing:!0,processing_text:"Lading ..",currentPage:1,perPage:10,user:null,editing_mode:!1,tax_records:[],tax_type_options:[],form:{tax_type_id:"",amount:"",date:"",filer_name:"",filer_contact:"",accountant_fee:"",comments:""},tax_fields:["type","amount","date","filer_name","filer_contact","accountant_fee","comments","added","actions"]}},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])(["currentUser"])),{},{rows:function(){return this.tax_records.length}}),methods:{get_tax_records:function(){var t=this;this.processing_text="Loading ..",this.isProcessing=!0,s["a"].get(_["a"]+"/tax_record",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.tax_records=e.data.data,t.isProcessing=!1}))},get_tax_type_options:function(){var t=this;s["a"].get(_["a"]+"/tax_type_options",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.tax_type_options=e.data}))},save_tax_record:function(){var t=this;this.processing_text="Saving Record ...",this.isProcessing=!0,s["a"].post(_["a"]+"/tax_record",this.form,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.get_tax_records(),t.reset_form(),t.$notify("".concat(e.data.status," filled"),e.data.status,e.data.message,{duration:3e3,permanent:!1}),t.isProcessing=!1})).catch((function(e){t.$notify("error filled","Error",e.response.data.message,{duration:3e3,permanent:!1}),t.isProcessing=!1}))},edit_tax_record:function(t){var e=this;this.editing_mode=!0,s["a"].get(_["a"]+"/tax_record/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.form=t.data,e.form.tax_type_id=parseInt(t.data.tax_type_id)}))},update_tax_record:function(t){var e=this;this.processing_text="Updating Data ...",this.isProcessing=!0,s["a"].put(_["a"]+"/tax_record/"+t,this.form,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_tax_records(),e.editing_mode=!1,e.reset_form(),e.$notify("success filled","Success",t.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1})).catch((function(t){e.$notify("error filled","Error",t.response.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1}))},delete_tax_record:function(t){var e=this;this.processing_text="Deleting Data ...",this.isProcissing=!0,s["a"].delete(_["a"]+"/tax_record/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_tax_records(),e.$notify("success filled","Success",t.data.message,{duration:3e3,permanent:!1}),e.isProcissing=!1})).catch((function(t){e.$notify("error filled","Error",erorr.response.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1}))},cancel_update_tax_record:function(){this.editing_mode=!1,this.reset_form()},reset_form:function(){this.form={tax_type_id:"",amount:"",date:"",filer_name:"",filer_contact:"",accountant_fee:"",comments:""}}},mounted:function(){null!==localStorage.getItem("token")?this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))):this.$router.push("/user/login"),this.get_tax_records(),this.get_tax_type_options()},watch:{currentUser:function(t){this.user=this.currentUser}}},f=p,g=r("2877"),v=Object(g["a"])(f,n,i,!1,null,null,null),h=v.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",[r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.mechanic.name")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.workshop_contact,callback:function(e){t.$set(t.form,"workshop_contact",e)},expression:"form.workshop_contact"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.mechanic.workshop_contact")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.workshop_address,callback:function(e){t.$set(t.form,"workshop_address",e)},expression:"form.workshop_address"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.mechanic.workshop_address")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.expertise,callback:function(e){t.$set(t.form,"expertise",e)},expression:"form.expertise"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.mechanic.expertise")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-textarea",{model:{value:t.form.comments,callback:function(e){t.$set(t.form,"comments",e)},expression:"form.comments"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.mechanic.comments")))])],1)])],1),t._v(" "),t.editing_mode?r("div",[r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"secondary"},on:{click:function(e){return e.stopPropagation(),t.update_mechanic_record(t.form.id)}}},[t._v(t._s(" Update"))]),t._v(" "),r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"info"},on:{click:function(e){return e.stopPropagation(),t.cancel_update_mechanic_record()}}},[r("i",{staticClass:"simple-icon-close"})])],1):r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.save_mechanic_record(e)}}},[t._v(t._s("Save"))]),t._v(" "),t.isProcessing?r("div",[r("b-spinner",{staticClass:"mb-1",attrs:{variant:"primary",label:"Spinning"}}),t._v(" "),r("p",{staticClass:"text-primary"},[t._v(t._s(t.processing_text))])],1):t._e()],1),t._v(" "),r("b-table",{attrs:{id:"mechanic_table",items:t.mechanic_records,fields:t.tax_fields,"current-page":"currentPage","per-page":t.perPage},scopedSlots:t._u([{key:"cell(added)",fn:function(e){return[r("ul",{staticClass:"menu"},[r("li",{staticClass:"menu-item"},[t._v("Added: "+t._s(e.item.added))]),t._v(" "),r("li",{staticClass:"menu-item"},[t._v("Updated: "+t._s(e.item.updated))])])]}},{key:"cell(actions)",fn:function(e){return[r("b-button",{attrs:{variant:"grey",size:"xs"},on:{click:function(r){return r.stopPropagation(),t.edit_mechanic_record(e.item)}}},[r("i",{staticClass:"simple-icon-pencil"})]),t._v(" "),1==t.user.role_id?r("b-button",{attrs:{variant:"grey",size:"xs"},on:{click:function(r){return r.stopPropagation(),t.delete_mechanic_record(e.item)}}},[r("i",{staticClass:"simple-icon-trash"})]):t._e()]}}])}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Current Page: "+t._s(t.currentPage))]),t._v(" "),r("b-pagination",{attrs:{align:"center",size:"md","total-rows":t.rows,"per-page":t.perPage,"aria-controls":"mechanic-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},x=[],y={components:{"v-select":m.a,Datepicker:u["a"]},data:function(){return{isProcessing:!1,processing_text:"Saving Data ... ",user:null,perPage:10,currentPage:1,editing_mode:!1,mechanic_records:[],form:{name:"",workshop_contact:"",workshop_address:"",expertise:"",comments:""},tax_fields:["name","workshop_contact","workshop_address","expertise","comments","added","actions"]}},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])(["currentUser"])),{},{rows:function(){return this.mechanic_records.length}}),methods:{get_mechanic_records:function(){var t=this;this.processing_text="Loading ... ",this.isProcessing=!0,s["a"].get(_["a"]+"/mechanic",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.mechanic_records=e.data,t.isProcessing=!1}))},save_mechanic_record:function(){var t=this;this.processing_text="Saving Data ...",this.isProcessing=!0,s["a"].post(_["a"]+"/mechanic",this.form,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.get_mechanic_records(),t.reset_form(),t.$notify("success filled","Success!",e.data.message,{duration:3e3,permanent:!1}),t.isProcessing=!1})).catch((function(e){t.$notify("error filled","Error!",e.response.data.message,{duration:3e3,permanent:!1}),t.isProcessing=!1}))},edit_mechanic_record:function(t){var e=this;this.processing_text="Loading Data .. ",this.isProcessing=!0,this.editing_mode=!0,s["a"].get(_["a"]+"/mechanic/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.form=t.data,e.isProcessing=!1}))},update_mechanic_record:function(t){var e=this;this.processing_text="Updating Data ...",this.isProcessing=!0,s["a"].put(_["a"]+"/mechanic/"+t,this.form,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_mechanic_records(),e.editing_mode=!1,e.reset_form(),e.$notify("success filled","Success!",t.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1}))},delete_mechanic_record:function(t){var e=this;this.processing_text="Deleting Data ...",this.isProcessing=!0,s["a"].delete(_["a"]+"/mechanic/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_mechanic_records(),e.$notify("success filled","Success!",t.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1}),e.isProcessing=!1}))},cancel_update_mechanic_record:function(){this.editing_mode=!1,this.reset_form()},reset_form:function(){this.form={name:"",workshop_contact:"",workshop_address:"",expertise:""}}},mounted:function(){null!==localStorage.getItem("token")?this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))):this.$router.push("/user/login"),this.get_mechanic_records()},watch:{currentUser:function(){this.user=this.currentUser}}},k=y,C=Object(g["a"])(k,b,x,!1,null,null,null),w=C.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-modal",{ref:"modalbasic",attrs:{id:"modalbasic",size:"lg",title:t.customer.first_name+" "+t.customer.last_name}},[r("table",{staticClass:"stacked table"},[r("tr",[r("td",[t._v("First Name:")]),r("td",[t._v(" "+t._s(t.customer.first_name))])]),t._v(" "),r("tr",[r("td",[t._v("Last Name:")]),r("td",[t._v(" "+t._s(t.customer.last_name))])]),t._v(" "),r("tr",[r("td",[t._v("Email:")]),r("td",[t._v(" "+t._s(t.customer.email))])]),t._v(" "),r("tr",[r("td",[t._v("Phone Number:")]),r("td",[t._v(" "+t._s(t.customer.phone_number))])]),t._v(" "),r("tr",[r("td",[t._v("Address:")]),r("td",[t._v(" "+t._s(t.customer.address))])]),t._v(" "),r("tr",[r("td",[t._v("Date of Birth:")]),r("td",[t._v(" "+t._s(t.customer.dob))])]),t._v(" "),r("tr",[r("td",[t._v("Gender:")]),r("td",[t._v(" "+t._s(t.customer.gender))])]),t._v(" "),r("tr",[r("td",[t._v("Occupation:")]),r("td",[t._v(" "+t._s(t.customer.occupation))])]),t._v(" "),r("tr",[r("td",[t._v("Driver Licence Number:")]),r("td",[t._v(" "+t._s(t.customer.driver_licence_number))])]),t._v(" "),r("tr",[r("td",[t._v("Driver Licence Front Picture:")]),r("td",[r("img",{attrs:{width:"100%",src:t.customer.driver_licence_front_picture}})])]),t._v(" "),r("tr",[r("td",[t._v("Driver Licence Back Picture:")]),r("td",[r("img",{attrs:{width:"100%",src:t.customer.driver_licence_back_picture}})])]),t._v(" "),r("tr",[r("td",[t._v("Driver Licence Expiry:")]),r("td",[t._v(" "+t._s(t.customer.driver_licence_expiry))])]),t._v(" "),t.customer.secondary_id_number?r("tr",[r("td",[t._v("Secondary ID Number Number:")]),r("td",[t._v(" "+t._s(t.customer.secondary_id_number))])]):t._e(),t._v(" "),t.customer.secondary_id_front_picture?r("tr",[r("td",[t._v("Secondary ID Front Picture:")]),r("td",[r("img",{attrs:{width:"100%",src:t.customer.secondary_id_front_picture}})])]):t._e(),t._v(" "),t.customer.secondary_id_back_picture?r("tr",[r("td",[t._v("Secondary ID Back Picture:")]),r("td",[r("img",{attrs:{width:"100%",src:t.customer.secondary_id_back_picture}})])]):t._e(),t._v(" "),t.customer.secondary_id_expiry?r("tr",[r("td",[t._v("Secondary ID Expiry:")]),r("td",[t._v(" "+t._s(t.customer.secondary_id_expiry))])]):t._e(),t._v(" "),r("tr",[r("td",[t._v("Nationatlity:")]),r("td",[t._v(" "+t._s(t.customer.nationality))])])])]),t._v(" "),r("b-form",[r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.first_name")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.last_name")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.email")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.phone_number,callback:function(e){t.$set(t.form,"phone_number",e)},expression:"form.phone_number"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.phone_number")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.address")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form.dob,callback:function(e){t.$set(t.form,"dob","string"===typeof e?e.trim():e)},expression:"form.dob"}}),t._v(" "),r("datepicker",{attrs:{"bootstrap-styling":!0,"disabled-dates":{from:new Date},"max-date":new Date,format:"dd-MM-yyyy"},model:{value:t.form.dob,callback:function(e){t.$set(t.form,"dob",e)},expression:"form.dob"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.dob")))]),t._v(" "),r("b-form-invalid-feedback",[t._v("Purchase date is required!")])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("v-select",{attrs:{reduce:function(t){return t.id},label:"name","aria-placeholder":"Select Gender",options:t.gender_options},model:{value:t.form.gender,callback:function(e){t.$set(t.form,"gender",e)},expression:"form.gender"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.gender")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.occupation,callback:function(e){t.$set(t.form,"occupation",e)},expression:"form.occupation"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.occupation")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.driver_licence_number,callback:function(e){t.$set(t.form,"driver_licence_number",e)},expression:"form.driver_licence_number"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.driver_licence_number")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",[t._v(t._s(t.$t("forms.customer.driver_licence_front_picture")))]),t._v(" "),r("b-file",{model:{value:t.form.driver_licence_front_picture,callback:function(e){t.$set(t.form,"driver_licence_front_picture",e)},expression:"form.driver_licence_front_picture"}})],1),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",[t._v(t._s(t.$t("forms.customer.driver_licence_back_picture")))]),t._v(" "),r("b-file",{model:{value:t.form.driver_licence_back_picture,callback:function(e){t.$set(t.form,"driver_licence_back_picture",e)},expression:"form.driver_licence_back_picture"}})],1),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form.driver_licence_expiry,callback:function(e){t.$set(t.form,"driver_licence_expiry","string"===typeof e?e.trim():e)},expression:"form.driver_licence_expiry"}}),t._v(" "),r("datepicker",{attrs:{"bootstrap-styling":!0,"disabled-dates":{to:new Date},format:"dd-MM-yyyy"},model:{value:t.form.driver_licence_expiry,callback:function(e){t.$set(t.form,"driver_licence_expiry",e)},expression:"form.driver_licence_expiry"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.driver_licence_expiry")))]),t._v(" "),r("b-form-invalid-feedback",[t._v("Driver licence expiry!")])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.secondary_id_number,callback:function(e){t.$set(t.form,"secondary_id_number",e)},expression:"form.secondary_id_number"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.secondary_id_number")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",[t._v(t._s(t.$t("forms.customer.secondary_id_front_picture")))]),t._v(" "),r("b-file",{attrs:{file:""},model:{value:t.form.secondary_id_front_picture,callback:function(e){t.$set(t.form,"secondary_id_front_picture",e)},expression:"form.secondary_id_front_picture"}})],1),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",[t._v(t._s(t.$t("forms.customer.secondary_id_back_picture")))]),t._v(" "),r("b-file",{attrs:{file:""},model:{value:t.form.secondary_id_back_picture,callback:function(e){t.$set(t.form,"secondary_id_back_picture",e)},expression:"form.secondary_id_back_picture"}})],1),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form.econdary_id_expiry,callback:function(e){t.$set(t.form,"econdary_id_expiry","string"===typeof e?e.trim():e)},expression:"form.econdary_id_expiry"}}),t._v(" "),r("datepicker",{attrs:{"bootstrap-styling":!0,"disabled-dates":{to:new Date},format:"dd-MM-yyyy"},model:{value:t.form.secondary_id_expiry,callback:function(e){t.$set(t.form,"secondary_id_expiry",e)},expression:"form.secondary_id_expiry"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.secondary_id_expiry")))]),t._v(" "),r("b-form-invalid-feedback",[t._v("Secondary id expiry!")])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.nationality,callback:function(e){t.$set(t.form,"nationality",e)},expression:"form.nationality"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.nationality")))])],1)])],1),t._v(" "),t.processing?r("div",[r("b-spinner",{attrs:{variant:"primary"}}),t._v(" "),r("span",{staticClass:"text-primary"},[t._v(t._s(t.processing_text))])],1):t._e(),t._v(" "),t.editing_mode?r("div",[r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"secondary"},on:{click:function(e){return e.stopPropagation(),t.update_customer_record(t.customer_id)}}},[t._v(t._s(" Update"))]),t._v(" "),r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"info"},on:{click:function(e){return e.stopPropagation(),t.cancel_update_customer_record()}}},[r("i",{staticClass:"simple-icon-close"})])],1):r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.save_customer_record(e)}}},[t._v(t._s("Save"))])],1),t._v(" "),r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("v-select",{attrs:{"aria-placeholder":"Select Gender",options:["email","whatsApp"]},model:{value:t.invitation_mode,callback:function(e){t.invitation_mode=e},expression:"invitation_mode"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.invitation_mode")))])],1)]),t._v(" "),"email"==t.invitation_mode?r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.invitation_email,callback:function(e){t.invitation_email=e},expression:"invitation_email"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.invitation_email")))])],1)]):r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.invitation_number,callback:function(e){t.invitation_number=e},expression:"invitation_number"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.customer.invitation_number")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(e){return e.stopPropagation(),t.send_invitation(t.form.invitation_email)}}},[t._v("Send Invitation")])],1)],1),t._v(" "),r("b-table",{attrs:{id:"customers-table",items:t.customer_records,fields:t.customer_fields,"per-page":t.perPage,"current-page":t.currentPage},scopedSlots:t._u([{key:"cell(role_name)",fn:function(e){return[r("div",{staticClass:"badge badge-light"},[t._v(t._s(e.value))])]}},{key:"cell(added)",fn:function(e){return[r("ul",{staticClass:"menu"},[r("li",{staticClass:"menu-item"},[t._v("Added: "+t._s(e.item.added))]),t._v(" "),r("li",{staticClass:"menu-item"},[t._v("Updated: "+t._s(e.item.updated))])])]}},{key:"cell(actions)",fn:function(e){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modalbasic",modifiers:{modalbasic:!0}}],attrs:{variant:"grey",size:"sm"},on:{click:function(r){return r.stopPropagation(),t.bring_fields(e.item)}}},[r("i",{staticClass:"simple-icon-eye"})]),t._v(" "),r("b-button",{attrs:{variant:"grey",size:"sm"},on:{click:function(r){return r.stopPropagation(),t.edit_customer_record(e.item)}}},[r("i",{staticClass:"simple-icon-pencil"})]),t._v(" "),1==t.user.role_id?r("b-button",{attrs:{variant:"grey",size:"sm"},on:{click:function(r){return r.stopPropagation(),t.delete_customer_record(e.item)}}},[r("i",{staticClass:"simple-icon-trash"})]):t._e()]}}])}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Current Page: "+t._s(t.currentPage))]),t._v(" "),r("b-pagination",{attrs:{align:"center",size:"md","total-rows":t.rows,"per-page":t.perPage,"aria-controls":"customers-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},P=[],S={components:{"v-select":m.a,Datepicker:u["a"]},data:function(){return{disableDates:{from:new Date},invitation_mode:"email",invitation_number:null,invitation_email:null,processing:!1,processing_text:"Loading..",gender_options:[{id:"1",name:"Male"},{id:"2",name:"Female"}],currentPage:1,perPage:10,user:null,editing_mode:!1,customer_records:[],role_options:[],role_id:null,customer_id:null,customer:[],form:{first_name:null,last_name:null,email:null,phone_number:null,address:null,dob:null,gender:null,occupation:null,driver_licence_number:null,driver_licence_front_picture:null,driver_licence_back_picture:null,driver_licence_expiry:null,nationality:null,secondary_id_number:null,secondary_id_front_picture:null,secondary_id_back_picture:null,secondary_id_expiry:null},customer_fields:["first_name","last_name","email","phone_number","address","added","actions"]}},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])(["currentUser"])),{},{rows:function(){return this.customer_records.length}}),methods:{send_invitation:function(){var t=this;if(this.processing_text="Sending Invitation",this.processing=!0,"email"==this.invitation_mode){if(null==this.invitation_email)return this.$notify("error filled","Error!","Email address is required to send email invitation",{duration:3e3,permanent:!1}),void(this.processing=!1);s["a"].post(_["a"]+"/invite-customer",{email:this.invitation_email}).then((function(e){t.$notify("success filled","Success!",e.data.message,{duration:3e3,permanent:!1}),t.processing=!1})).catch((function(e){t.$notify("error filled","Error!",e.response.data.message,{duration:3e3,permanent:!1}),t.processing=!1}))}else{if(null==this.invitation_number)return this.$notify("error filled","Error!","Number is required to send WhatsApp Invitation",{duration:3e3,permanent:!1}),void(this.processing=!1);s["a"].post(_["a"]+"/whatsapp-invite-customer",{phone_number:this.invitation_number}).then((function(e){t.$notify("success filled","Success!",e.data.message,{duration:3e3,permanent:!1}),t.processing=!1})).catch((function(e){t.$notify("error filled","Error!",e.response.data.message,{duration:3e3,permanent:!1}),t.processing=!1}))}},bring_fields:function(t){this.customer=t},get_customer_records:function(){var t=this;this.processing_text="Loading ...",this.processing=!0,s["a"].get(_["a"]+"/customer",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.customer_records=e.data,t.processing=!1}))},save_customer_record:function(){var t=this;this.processing_text="Saving Data ...",this.processing=!0,s["a"].post(_["a"]+"/customer",this.form,{headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.get_customer_records(),t.reset_form(),t.$notify("success filled","Success!",e.data.message,{duration:3e3,permanent:!1}),t.processing=!1})).catch((function(e){t.$notify("error filled","Error!",e.response.data.message,{duration:3e3,permanent:!1}),t.processing=!1}))},edit_customer_record:function(t){var e=this;this.editing_mode=!0,s["a"].get(_["a"]+"/customer/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.form.first_name=t.data.first_name,e.form.last_name=t.data.last_name,e.form.phone_number=t.data.phone_number,e.form.email=t.data.email,e.form.address=t.data.address,e.customer_id=t.data.id,e.form.dob=t.data.dob,e.form.gender=t.data.gender,e.form.occupation=t.data.occupation,e.form.driver_licence_number=t.data.driver_licence_number,e.form.driver_licence_front_picture=t.data.driver_licence_front_picture,e.form.driver_licence_back_picture=t.data.driver_licence_back_picture,e.form.driver_licence_expiry=t.data.driver_licence_expiry,e.form.nationality=t.data.nationality,e.form.secondary_id_number=t.data.secondary_id_number,e.form.secondary_id_front_picture=t.data.secondary_id_front_picture,e.form.secondary_id_back_picture=t.data.secondary_id_back_picture,e.form.secondary_id_expiry=t.data.secondary_id_expiry}))},update_customer_record:function(t){var e=this;this.processing_text="Updating Data ...",this.processing=!0,s["a"].post(_["a"]+"/customer/"+t,Object(c["a"])(Object(c["a"])({},this.form),{},{_method:"put"}),{headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_customer_records(),e.editing_mode=!1,e.reset_form(),e.$notify("success filled","Success!",t.data.message,{duration:3e3,permanent:!1}),e.processing=!1})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1}),e.processing=!1}))},delete_customer_record:function(t){var e=this;this.processing_text="Deleting Data ...",this.processing=!0,s["a"].delete(_["a"]+"/customer/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_customer_records(),e.$notify("success filled","Success!",t.data.message,{duration:3e3,permanent:!1}),e.processing=!1})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1}),e.processing=!1}))},cancel_update_customer_record:function(){this.editing_mode=!1,this.reset_form()},reset_form:function(){this.form={name:null,email:null,role_id:"Select Role"}},get_role_options:function(){var t=this;s["a"].get(_["a"]+"/role",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.role_options=e.data}))}},mounted:function(){this.get_role_options(),null!==localStorage.getItem("token")?this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))):this.$router.push("/user/login"),this.get_customer_records()},watch:{currentUser:function(){this.user=this.currentUser}}},I=S,E=Object(g["a"])(I,$,P,!1,null,null,null),z=E.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-modal",{ref:"booking_search_modal",attrs:{id:"modallg",size:"lg",title:"Search Bookings","hide-footer":""}},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v("Toll Number")]),t._v(" "),r("th",[t._v("Date ")]),t._v(" "),r("th",[t._v("Registration Number")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v(t._s(t.current_toll_record.toll_number))]),t._v(" "),r("td",[t._v(t._s(t.current_toll_record.date))]),t._v(" "),r("td",[t._v(t._s(t.current_toll_record.reg_plate_number))])])])]),t._v(" "),r("div",{staticClass:"alert alert-info"},[t._v("Do you want to search booking database to indentify which customer had the vehicle on date of toll recipet ?")]),t._v(" "),r("b-button",{staticClass:"btn btn-primary ",attrs:{type:"button"},on:{click:function(e){return t.search_booking_records(t.current_toll_record.date,t.current_toll_record.reg_plate_number)}}},[t._v("Search Bookings Database")]),t._v(" "),t.is_searching?r("b-card",[r("b-spinner",{staticClass:"mb-1",attrs:{variant:"primary",label:"Spinning"}}),t._v("\n          Searching Records ...\n        ")],1):t._e(),t._v(" "),0!=t.booking_data.length?r("b-card",{staticClass:"mt-4"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",[t._v("Customer Name")]),t._v(" "),r("th",[t._v("Van Out Date")]),t._v(" "),r("th",[t._v("Van Return Date")])])]),t._v(" "),r("tbody",t._l(t.toll_records,(function(e){return r("b-tr",{key:e.id},[r("b-td",[t._v(t._s(t.booking_data.customer))]),t._v(" "),r("b-td",[t._v(t._s(t.booking_data.van_out_date))]),t._v(" "),r("b-td",[t._v(t._s(t.booking_data.return_date))])],1)})),1)]),t._v(" "),r("b-button",{staticClass:"btn btn-primary ",attrs:{type:"button"},on:{click:function(e){return t.assign_toll_to_customer(t.current_toll_record.id)}}},[t._v("Assign Toll to customer")])],1):t._e()],1),t._v(" "),r("b-form",[r("b-row",[r("img",{attrs:{width:"200",src:t.preview}})]),t._v(" "),r("b-row",{staticClass:"mt-3"},[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{model:{value:t.form.toll_number,callback:function(e){t.$set(t.form,"toll_number",e)},expression:"form.toll_number"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.toll.toll_number")))])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("b-form-input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date","string"===typeof e?e.trim():e)},expression:"form.date"}}),t._v(" "),r("datepicker",{attrs:{"bootstrap-styling":!0,format:"dd-MM-yyyy"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.toll.date")))]),t._v(" "),r("b-form-invalid-feedback",[t._v("Secondary id expiry!")])],1)]),t._v(" "),r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("v-select",{attrs:{"aria-placeholder":"Select Gender",label:"reg_plate_number",reduce:function(t){return t.reg_plate_number},options:t.vehicle_options},model:{value:t.form.reg_plate_number,callback:function(e){t.$set(t.form,"reg_plate_number",e)},expression:"form.reg_plate_number"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.toll.vehicle_reg_number")))])],1)]),t._v(" "),r("b-colxx",{attrs:{xxs:"12",xs:"3",lg:"3"}},[r("b-form",[r("div",[r("b-form-file",{attrs:{placeholder:t.$t("forms.toll.toll_image"),"drop-placeholder":"Drop file here...",accept:"image/*"},on:{change:t.handImageUpload},model:{value:t.form.toll_image,callback:function(e){t.$set(t.form,"toll_image",e)},expression:"form.toll_image"}})],1)])],1)],1),t._v(" "),1==t.customer_drop_visible?r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("v-select",{attrs:{label:"name",reduce:function(t){return t.id},options:t.customer_options},model:{value:t.form.customer_id,callback:function(e){t.$set(t.form,"customer_id",e)},expression:"form.customer_id"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.toll.customer")))])],1)])],1):t._e(),t._v(" "),r("b-row",[r("b-colxx",{staticClass:"mb-3",attrs:{xxs:"12",xs:"3",lg:"3"}},[r("label",{staticClass:"form-group has-top-label"},[r("v-select",{attrs:{label:"name",reduce:function(t){return t.id},options:t.payment_status_options},model:{value:t.form.payment_status,callback:function(e){t.$set(t.form,"payment_status",e)},expression:"form.payment_status"}}),t._v(" "),r("span",[t._v(t._s(t.$t("forms.toll.payment_status")))])],1)])],1),t._v(" "),t.editing_mode?r("div",[r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"secondary"},on:{click:function(e){return e.stopPropagation(),t.update_toll_record(t.form.id)}}},[t._v(t._s(" Update"))]),t._v(" "),r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"info"},on:{click:function(e){return e.stopPropagation(),t.cancel_update_toll_record()}}},[r("i",{staticClass:"simple-icon-close"})])],1):r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"primary"},on:{click:function(e){return e.stopPropagation(),t.save_toll_record(e)}}},[t._v(t._s("Save"))]),t._v(" "),t.isProcessing?r("div",[r("b-spinner",{staticClass:"mb-1",attrs:{variant:"primary",label:"Spinning"}}),t._v(" "),r("p",{staticClass:"text-primary"},[t._v(t._s(t.processing_text))])],1):t._e()],1),t._v(" "),r("b-colxx",{staticClass:"mb-5",attrs:{xxs:"12",xs:"6",lg:"6",xl:"6"}},[r("b-form",[r("h2",[t._v("Import Excel File")]),t._v(" "),r("div",[r("b-form-file",{attrs:{placeholder:"Select excel file","drop-placeholder":"Drop file here...",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:t.handleTollImport},model:{value:t.toll_import,callback:function(e){t.toll_import=e},expression:"toll_import"}}),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-3"},[r("b-button",{staticClass:"mt-4 mb-4",attrs:{variant:"outline-primary"},on:{click:function(e){return e.stopPropagation(),t.import_toll_record(e)}}},[t._v(t._s("Import"))])],1),t._v(" "),r("div",{staticClass:"col-7"},[r("b-button",{staticClass:" btn btn-outline-info mt-4 mb-4",on:{click:function(e){return e.stopPropagation(),t.download_excel_template(e)}}},[t._v(t._s("Download Template"))])],1)])],1)])],1),t._v(" "),r("b-table",{attrs:{id:"toll_table",items:t.toll_records,fields:t.toll_fields,"current-page":"currentPage","per-page":t.perPage},scopedSlots:t._u([{key:"cell(toll_image)",fn:function(t){return[r("img",{staticClass:"list-thumbnail responsive border-0",attrs:{widh:"100%",src:t.item.toll_image}})]}},{key:"cell(added)",fn:function(e){return[r("ul",{staticClass:"menu"},[r("li",{staticClass:"menu-item"},[t._v("Added: "+t._s(e.item.added))]),t._v(" "),r("li",{staticClass:"menu-item"},[t._v("Updated: "+t._s(e.item.updated))])])]}},{key:"cell(actions)",fn:function(e){return[r("b-button",{attrs:{variant:"grey",size:"xs"},on:{click:function(r){return r.stopPropagation(),t.edit_toll_record(e.item)}}},[r("i",{staticClass:"simple-icon-pencil"})]),t._v(" "),1==t.user.role_id?r("b-button",{attrs:{variant:"grey",size:"xs"},on:{click:function(r){return r.stopPropagation(),t.delete_toll_record(e.item)}}},[r("i",{staticClass:"simple-icon-trash"})]):t._e()]}}])}),t._v(" "),r("p",{staticClass:"mt-3"},[t._v("Current Page: "+t._s(t.currentPage))]),t._v(" "),r("b-pagination",{attrs:{align:"center",size:"md","total-rows":t.rows,"per-page":t.perPage,"aria-controls":"toll-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},D=[],A=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),O={components:{"v-select":m.a,Datepicker:u["a"]},data:function(){return{toll_import:[],current_toll_record:[],booking_data:[],is_searching:!1,customer_drop_visible:!1,isProcessing:!1,processing_text:"Saving Data ..",preview:null,currentPage:1,perPage:10,user:null,editing_mode:!1,toll_records:[],vehicle_options:[],customer_options:[],payment_status_options:[{id:"paid",name:"Paid"},{id:"unpaid",name:"Unpaid"}],form:{toll_number:null,date:null,reg_plate_number:null,toll_image:null,customer_id:null,payment_status:null},toll_fields:["id","toll_number","date","reg_plate_number","customer","payment_status","added","actions"]}},computed:Object(c["a"])(Object(c["a"])({},Object(d["c"])(["currentUser"])),{},{rows:function(){return this.toll_records.length}}),methods:{handImageUpload:function(t){this.preview=URL.createObjectURL(t.target.files[0]),this.form.toll_image=t.target.files[0]},handleTollImport:function(t){this.toll_import=t.target.files[0]},import_toll_record:function(){var t=this;this.isProcessing=!0,this.processing_text="Importing toll record ..",console.log(this.toll_import),s["a"].post(_["a"]+"/toll_import",{toll:this.toll_import},{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.isProcessing=!1,t.$notify("success filled","Message!","Excel file imported",{duration:3e3,permanent:!1}),t.get_toll_records(),t.get_customers()})).catch((function(e){console.log(e),t.isProcessing=!1}))},download_excel_template:function(){s["a"].post("/assets/files/toll_template.xlsx",{file_name:"toll_template.xlsx"},{responseType:"blob"}).then((function(t){var e=URL.createObjectURL(new Blob([t.data],{type:"application/vnd.ms-excel"})),r=document.createElement("a");r.href=e,r.setAttribute("download","toll_template.xlsx"),document.body.appendChild(r),r.click()}))},get_customers:function(){var t=this;this.processing_text="Loading ..",this.isProcessing=!0,s["a"].get(_["a"]+"/all_customer_options",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.customer_options=e.data,t.isProcessing=!1}))},get_vehicles:function(){var t=this;this.processing_text="Loading ..",this.isProcessing=!0,s["a"].get(_["a"]+"/vehicle",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.vehicle_options=e.data,t.isProcessing=!1}))},get_toll_records:function(){var t=this;this.processing_text="Loading ..",this.isProcessing=!0,s["a"].get(_["a"]+"/toll",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.toll_records=e.data,t.isProcessing=!1}))},save_toll_record:function(){var t=this;this.processing_text="Saving Data and checking toll information against rental records..",this.isProcessing=!0,s["a"].post(_["a"]+"/toll",this.form,{headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.current_toll_record=e.data.data,t.get_toll_records(),t.reset_form(),t.$notify("success filled","Success!",e.data.message,{duration:3e3,permanent:!1}),t.isProcessing=!1,t.form.toll_image="",t.customer_drop_visible=!0,t.$refs["booking_search_modal"].show()})).catch((function(e){console.log(e),t.isProcessing=!1}))},search_booking_records:function(t,e){var r=this;this.is_searching=!0,s["a"].get(_["a"]+"/search_toll_record/"+t+"/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){r.is_searching=!1,0!=t.data.length?r.booking_data=t.data[0]:r.$notify("error filled","Error!","No record found aginst provided Registration and Date",{duration:6e3,permanent:!1})}))},edit_toll_record:function(t){var e=this;this.customer_drop_visible=!0,this.processing_text="Loading Data ...",this.isProcessing=!0,this.editing_mode=!0,s["a"].get(_["a"]+"/toll/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.form.toll_image=t.data.toll_image,e.form.id=t.data.id,e.form.toll_number=t.data.toll_number,e.form.date=t.data.date,e.form.reg_plate_number=t.data.reg_plate_number,e.form.customer_id=parseInt(t.data.customer_id),e.form.payment_status=t.data.payment_status,e.preview=t.data.toll_image,e.isProcessing=!1}))},assign_toll_to_customer:function(t){var e=this;s["a"].post(_["a"]+"/toll/"+t,{customer_id:this.booking_data.customer_id,_method:"put"},{headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.$refs["booking_search_modal"].hide(),e.get_toll_records()})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1})}))},update_toll_record:function(t){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,s["a"].post(_["a"]+"/toll/"+t,Object(c["a"])(Object(c["a"])({},e.form),{},{_method:"put"}),{headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){console.log(t.data),e.get_toll_records(),e.editing_mode=!1,e.reset_form(),e.$notify("success filled","Success!",t.data.message,{duration:3e3,permanent:!1}),e.toll_image=""})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1})}));case 2:case"end":return r.stop()}}),r)})))()},delete_toll_record:function(t){var e=this;s["a"].delete(_["a"]+"/toll/"+t.id,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){e.get_toll_records(),e.$notify("success filled","Success!",t.data.message,{duration:3e3,permanent:!1})})).catch((function(t){e.$notify("error filled","Error!",t.response.data.message,{duration:3e3,permanent:!1})}))},cancel_update_toll_record:function(){this.editing_mode=!1,this.customer_drop_visible=!1,this.reset_form()},reset_form:function(){this.form={toll_number:null,date:null,toll_image:null}}},mounted:function(){null!==localStorage.getItem("token")?this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))):this.$router.push("/user/login"),this.get_customers(),this.get_vehicles(),this.get_toll_records()},watch:{currentUser:function(t){this.user=this.currentUser}}},B=O,j=Object(g["a"])(B,L,D,!1,null,null,null),U=j.exports,N={components:{tax:h,mechanic:w,customer:z,toll:U},data:function(){return{tax_records:[],mechanic_workshop_records:[],customer_records:[],toll_records:[]}},methods:{get_toll_records:function(){var t=this;s["a"].get(_["a"]+"/toll",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.toll_records=e.data}))},get_tax_records:function(){var t=this;s["a"].get(_["a"]+"/tax_record",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.tax_records=e.data}))},get_customer_records:function(){var t=this;s["a"].get(_["a"]+"/customer",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.customer_records=e.data}))},get_mechanic_workshop_records:function(){var t=this;s["a"].get(_["a"]+"/mechanic",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.mechanic_workshop_records=e.data}))}},mounted:function(){null!==localStorage.getItem("token")?this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))):this.$router.push("/user/login")}},R=N,T=Object(g["a"])(R,o,a,!1,null,null,null);e["default"]=T.exports},"96cf":function(t,e){!function(e){"use strict";var r,o=Object.prototype,a=o.hasOwnProperty,s="function"===typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag",l="object"===typeof t,m=e.regeneratorRuntime;if(m)l&&(t.exports=m);else{m=e.regeneratorRuntime=l?t.exports:{},m.wrap=x;var u="suspendedStart",_="suspendedYield",d="executing",p="completed",f={},g={};g[n]=function(){return this};var v=Object.getPrototypeOf,h=v&&v(v(D([])));h&&h!==o&&a.call(h,n)&&(g=h);var b=w.prototype=k.prototype=Object.create(g);C.prototype=b.constructor=w,w.constructor=C,w[c]=C.displayName="GeneratorFunction",m.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(b),t},m.awrap=function(t){return{__await:t}},$(P.prototype),P.prototype[i]=function(){return this},m.AsyncIterator=P,m.async=function(t,e,r,o){var a=new P(x(t,e,r,o));return m.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},$(b),b[c]="Generator",b[n]=function(){return this},b.toString=function(){return"[object Generator]"},m.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){while(e.length){var o=e.pop();if(o in t)return r.value=o,r.done=!1,r}return r.done=!0,r}},m.values=D,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(z),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(o,a){return i.type="throw",i.arg=t,e.next=o,a&&(e.method="next",e.arg=r),!!a}for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s],i=n.completion;if("root"===n.tryLoc)return o("end");if(n.tryLoc<=this.prev){var c=a.call(n,"catchLoc"),l=a.call(n,"finallyLoc");if(c&&l){if(this.prev<n.catchLoc)return o(n.catchLoc,!0);if(this.prev<n.finallyLoc)return o(n.finallyLoc)}else if(c){if(this.prev<n.catchLoc)return o(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return o(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var n=s?s.completion:{};return n.type=t,n.arg=e,s?(this.method="next",this.next=s.finallyLoc,f):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),z(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var a=o.arg;z(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:D(t),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=r),f}}}function x(t,e,r,o){var a=e&&e.prototype instanceof k?e:k,s=Object.create(a.prototype),n=new L(o||[]);return s._invoke=S(t,r,n),s}function y(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(o){return{type:"throw",arg:o}}}function k(){}function C(){}function w(){}function $(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function P(t){function e(r,o,s,n){var i=y(t[r],t,o);if("throw"!==i.type){var c=i.arg,l=c.value;return l&&"object"===typeof l&&a.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,s,n)}),(function(t){e("throw",t,s,n)})):Promise.resolve(l).then((function(t){c.value=t,s(c)}),n)}n(i.arg)}var r;function o(t,o){function a(){return new Promise((function(r,a){e(t,o,r,a)}))}return r=r?r.then(a,a):a()}this._invoke=o}function S(t,e,r){var o=u;return function(a,s){if(o===d)throw new Error("Generator is already running");if(o===p){if("throw"===a)throw s;return A()}r.method=a,r.arg=s;while(1){var n=r.delegate;if(n){var i=I(n,r);if(i){if(i===f)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===u)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var c=y(t,e,r);if("normal"===c.type){if(o=r.done?p:_,c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=p,r.method="throw",r.arg=c.arg)}}}function I(t,e){var o=t.iterator[e.method];if(o===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,I(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var a=y(o,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var s=a.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,f):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function D(t){if(t){var e=t[n];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function e(){while(++o<t.length)if(a.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return s.next=s}}return{next:A}}function A(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},ddb0:function(t,e,r){var o=r("da84"),a=r("fdbc"),s=r("e260"),n=r("9112"),i=r("b622"),c=i("iterator"),l=i("toStringTag"),m=s.values;for(var u in a){var _=o[u],d=_&&_.prototype;if(d){if(d[c]!==m)try{n(d,c,m)}catch(f){d[c]=m}if(d[l]||n(d,l,u),a[u])for(var p in s)if(d[p]!==s[p])try{n(d,p,s[p])}catch(f){d[p]=s[p]}}}}}]);